# üìä –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: –ö–æ–≥–¥–∞ –æ–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º?

## üîÑ –°—Ç–∞—Ç—É—Å—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç–∞—Ç—É—Å—ã –≤ —Å–∏—Å—Ç–µ–º–µ:

1. **`pending`** - –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å)
2. **`confirmed`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ö–æ–∑—è–∏–Ω–æ–º
3. **`cancelled`** - –û—Ç–º–µ–Ω–µ–Ω–æ

### –°—Ç–∞—Ç—É—Å—ã –æ–ø–ª–∞—Ç—ã:

1. **`pending`** - –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã (–Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å)
2. **`paid`** - –û–ø–ª–∞—á–µ–Ω–æ
3. **`refunded`** - –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
4. **`failed`** - –û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã

---

## üìù –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–æ–º–µ–Ω—Ç 1: –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–≥–¥–∞:** –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

```192:195:booking_api.php
            'status' => 'pending',
            'payment_status' => 'pending',
            'special_requests' => $data['special_requests']
        ];
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ç—É—Å: `pending` (–æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
- ‚úÖ –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã: `pending` (–æ–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã)
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∏—Å—å–º–æ –≥–æ—Å—Ç—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ö–æ–∑—è–∏–Ω—É –æ –Ω–æ–≤–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è Payment Intent –≤ Stripe (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

**–í–∞–∂–Ω–æ:** –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–ï —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º!

---

## ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–æ–º–µ–Ω—Ç 2: –•–æ–∑—è–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–≥–¥–∞:** –•–æ–∑—è–∏–Ω –∑–∞—Ö–æ–¥–∏—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

```338:346:booking_api.php
        if ($booking['status'] !== 'pending') {
            sendError('Booking cannot be confirmed. Current status: ' . $booking['status']);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        $updateData = [
            'status' => 'confirmed',
            'updated_at' => date('Y-m-d H:i:s')
        ];
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `confirmed`
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ö–æ–∑—è–∏–Ω–æ–º
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∏—Å—å–º–æ –≥–æ—Å—Ç—é –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–í–∞–∂–Ω–æ:** –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º**, –Ω–æ –µ—â–µ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –æ–ø–ª–∞—á–µ–Ω–æ!

---

## üí≥ –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã

### –ú–æ–º–µ–Ω—Ç 3: –ì–æ—Å—Ç—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–≥–¥–∞:** –ì–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ Stripe

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ** (—á–µ—Ä–µ–∑ webhook –æ—Ç Stripe):

```212:212:payment_service.php
            'payment_status' => 'paid',
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `paid`
- ‚úÖ –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ID –ø–ª–∞—Ç–µ–∂–∞ Stripe
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∏—Å—å–º–æ –≥–æ—Å—Ç—é –æ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

**–í–∞–∂–Ω–æ:** –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–ª–∞—á–µ–Ω–æ, –Ω–æ —Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –±—ã—Ç—å:
- `pending` + `paid` - –æ–ø–ª–∞—á–µ–Ω–æ, –Ω–æ –µ—â–µ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ö–æ–∑—è–∏–Ω–æ–º
- `confirmed` + `paid` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∏ –æ–ø–ª–∞—á–µ–Ω–æ ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–û**

---

## üéØ –ö–æ–≥–¥–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –í–´–ü–û–õ–ù–ï–ù–ù–´–ú?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º, –∫–æ–≥–¥–∞:

**–°—Ç–∞—Ç—É—Å: `confirmed` + –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã: `paid`**

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –•–æ–∑—è–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ì–æ—Å—Ç—å –æ–ø–ª–∞—Ç–∏–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º, –∫–æ–≥–¥–∞:

**–°—Ç–∞—Ç—É—Å: `confirmed`** (–¥–∞–∂–µ –±–µ–∑ –æ–ø–ª–∞—Ç—ã)

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –•–æ–∑—è–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚è≥ –û–ø–ª–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–∞ –∏–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–í —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í–∞—Ä–∏–∞–Ω—Ç 1** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞:
- –°—Ç–∞—Ç—É—Å = `confirmed` –ò
- –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã = `paid`

---

## üìä –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

| –°—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã | –û–ø–∏—Å–∞–Ω–∏–µ | –°—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º? |
|---------------------|---------------|----------|------------------------|
| `pending` | `pending` | –°–æ–∑–¥–∞–Ω–æ, –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è | ‚ùå –ù–µ—Ç |
| `pending` | `paid` | –û–ø–ª–∞—á–µ–Ω–æ, –Ω–æ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ö–æ–∑—è–∏–Ω–æ–º | ‚ùå –ù–µ—Ç |
| `confirmed` | `pending` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, –Ω–æ –Ω–µ –æ–ø–ª–∞—á–µ–Ω–æ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ |
| `confirmed` | `paid` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∏ –æ–ø–ª–∞—á–µ–Ω–æ | ‚úÖ **–î–ê** |
| `cancelled` | –ª—é–±–æ–π | –û—Ç–º–µ–Ω–µ–Ω–æ | ‚ùå –ù–µ—Ç |

---

## üîç –ì–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (Dashboard):

```860:860:admin-bookings.js
          .filter(b => b.status === 'confirmed' && b.payment_status === 'paid')
```

**–î–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ—Ö–æ–¥–∞** —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `confirmed` + `paid`

### –í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:

```149:149:availability-calendar.js
      status: 'confirmed,pending' // –¢–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –∏ –æ–∂–∏–¥–∞—é—â–∏–µ
```

**–î–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–∞—Ç** —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è `confirmed` –∏ `pending` –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞:

**–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–æ–≥–¥–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º:**

1. **–í–∞—Ä–∏–∞–Ω—Ç –ê: –¢–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ö–æ–∑—è–∏–Ω–æ–º**
   - –°—Ç–∞—Ç—É—Å = `confirmed`
   - –û–ø–ª–∞—Ç–∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è "–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏"

2. **–í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ + –û–ø–ª–∞—Ç–∞** (—Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞)
   - –°—Ç–∞—Ç—É—Å = `confirmed` –ò –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã = `paid`
   - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

3. **–í–∞—Ä–∏–∞–Ω—Ç –í: –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–∏–µ**
   - –°—Ç–∞—Ç—É—Å = `pending` —É–∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º
   - –í—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è

**–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –í–∞—Ä–∏–∞–Ω—Ç –ë** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ö–æ–∑—è–∏–Ω–æ–º –ò –æ–ø–ª–∞—á–µ–Ω–æ –≥–æ—Å—Ç–µ–º.

---

## ‚úÖ –ò—Ç–æ–≥

**–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –í–´–ü–û–õ–ù–ï–ù–ù–´–ú, –∫–æ–≥–¥–∞:**

‚úÖ –°—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è = `confirmed`  
‚úÖ –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã = `paid`

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- –•–æ–∑—è–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ì–æ—Å—Ç—å –æ–ø–ª–∞—Ç–∏–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Stripe
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–µ–∑–¥—É

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É** - —Å–∫–∞–∂–∏—Ç–µ, –∏ —è –ø–æ–º–æ–≥—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–¥ –≤–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è! üöÄ



