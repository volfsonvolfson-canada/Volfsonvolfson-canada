# üìß –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞: –ö–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

## ‚ùå –í–∞–∂–Ω–æ: –ü–∏—Å—å–º–∞ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –≤ order.html

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç order.html:

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ `order.html` —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `localStorage`:**

```145:147:order.html
        const raw = localStorage.getItem('btb_orders');
        let arr = [];
        try { arr = JSON.parse(raw || '[]'); } catch (_) {}
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- ‚ùå `order.html` –ù–ï —Å–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå `order.html` –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç API `create_booking`
- ‚ùå –ü–∏—Å—å–º–∞ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞ `order.html`

---

## ‚úÖ –ö–æ–≥–¥–∞ –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

### –ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–º–Ω–∞—Ç—ã:

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. **–ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `room-basement.html`)
2. **–ù–∞–∂–∏–º–∞–µ—Ç "Book" –∏–ª–∏ "Submit"**
3. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleBookingForm`** –∏–∑ `booking.js`:

```232:294:booking.js
async function handleBookingForm(form) {
  try {
    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
    // ...
    
    // –°–æ–∑–¥–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    const result = await createBooking(formData);
```

4. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å `create_booking`** –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```60:75:booking.js
async function createBooking(bookingData) {
  try {
    const formData = new FormData();
    formData.append('action', 'create_booking');
    // ... –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```

5. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleCreateBooking`** –≤ `booking_api.php`
6. **–°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
7. **–û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∏—Å—å–º–∞:**

```237:255:booking_api.php
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≥–æ—Å—Ç—é (–µ—Å–ª–∏ email —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
        if (!empty(SENDGRID_API_KEY)) {
            try {
                sendBookingConfirmation($booking);
            } catch (Exception $e) {
                // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É email, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                logActivity("Failed to send booking confirmation email: " . $e->getMessage(), 'WARNING');
            }
        }
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ö–æ–∑—è–∏–Ω—É –æ –Ω–æ–≤–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ (–µ—Å–ª–∏ email —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
        if (!empty(SENDGRID_API_KEY)) {
            try {
                sendBookingRequestToHost($booking);
            } catch (Exception $e) {
                // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É email, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
                logActivity("Failed to send booking request to host: " . $e->getMessage(), 'WARNING');
```

**–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- ‚úÖ –ü–∏—Å—å–º–æ –≥–æ—Å—Ç—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü–∏—Å—å–º–æ —Ö–æ–∑—è–∏–Ω—É –æ –Ω–æ–≤–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞: –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ –ø–∏—Å—å–º–∞?

### –£—Å–ª–æ–≤–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º:

1. ‚úÖ **–§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∞** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–º–Ω–∞—Ç—ã
2. ‚úÖ **–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "Book"** –∏–ª–∏ "Submit"
3. ‚úÖ **–í—ã–∑–≤–∞–Ω API `create_booking`**
4. ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
5. ‚úÖ **Mailgun –Ω–∞—Å—Ç—Ä–æ–µ–Ω** (`MAILGUN_API_KEY` –Ω–µ –ø—É—Å—Ç–æ–π)
6. ‚úÖ **Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö** (–¥–ª—è Sandbox Domain)

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Mailgun:**
   - –í Mailgun Dashboard ‚Üí **Sending** ‚Üí **Logs**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–∞—Ö

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç–æ–≤—ã–µ —è—â–∏–∫–∏:**
   - Email –≥–æ—Å—Ç—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
   - Email —Ö–æ–∑—è–∏–Ω–∞ (`backtobasewellness@gmail.com`)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –í —Ç–∞–±–ª–∏—Ü–µ `bookings` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å
   - –°—Ç–∞—Ç—É—Å: `pending`
   - –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã: `pending`

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: Sandbox Domain –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Sandbox Domain:

**–ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ email-–∞–¥—Ä–µ—Å–∞!**

- ‚úÖ Email –≥–æ—Å—Ç—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ **Authorized Recipients** –≤ Mailgun
- ‚úÖ Email —Ö–æ–∑—è–∏–Ω–∞ (`backtobasewellness@gmail.com`) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ
- ‚ùå –ï—Å–ª–∏ email –Ω–µ –≤ —Å–ø–∏—Å–∫–µ - –ø–∏—Å—å–º–æ –ù–ï –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è

---

## üìù –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ order.html (—á–µ—Ä–µ–∑ localStorage)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `localStorage` –±—Ä–∞—É–∑–µ—Ä–∞
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è API `create_booking`
- ‚ùå –ü–∏—Å—å–º–∞ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–º–Ω–∞—Ç—ã

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –Ω–∞ `room-basement.html`
2. –ù–∞–∂–∏–º–∞–µ—Ç "Book"
3. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleBookingForm` ‚Üí `createBooking` ‚Üí API `create_booking`
4. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
5. –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∏—Å—å–º–∞ (–µ—Å–ª–∏ Mailgun –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è ‚úÖ

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–ø—Ä–æ–±–ª–µ–º—ã)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **Mailgun –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - `MAILGUN_API_KEY` –ø—É—Å—Ç–æ–π –≤ `config.php`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `config.php` —Å—Ç—Ä–æ–∫–∞ 29

2. **Email –Ω–µ –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö:**
   - –î–ª—è Sandbox Domain email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: Mailgun Dashboard ‚Üí Sending ‚Üí Domain Settings ‚Üí Authorized Recipients

3. **–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Mailgun ‚Üí Sending ‚Üí Logs
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ (PHP error logs)

4. **–ó–∞–ø–∏—Å—å –Ω–µ —Å–æ–∑–¥–∞–ª–∞—Å—å –≤ –±–∞–∑–µ:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `bookings` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API `create_booking` –±—ã–ª –≤—ã–∑–≤–∞–Ω

---

## ‚úÖ –ò—Ç–æ–≥

**–ü–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞:**

1. ‚úÖ –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–º–Ω–∞—Ç—ã
2. ‚úÖ –ù–∞–∂–∏–º–∞–µ—Ç "Book" –∏–ª–∏ "Submit"
3. ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API `create_booking`
4. ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ Mailgun –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ email –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö

**–ü–∏—Å—å–º–∞ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ–≥–¥–∞:**

- ‚ùå –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∑–∞–∫–∞–∑ –≤ `order.html`
- ‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ –∑–∞–∫–∞–∑ –Ω–∞ `order.html`
- ‚ùå –°–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ `localStorage`

**–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `room-basement.html`)
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ email –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ Mailgun
4. –ù–∞–∂–º–∏—Ç–µ "Book"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Mailgun –∏ –ø–æ—á—Ç–æ–≤—ã–µ —è—â–∏–∫–∏

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Mailgun:

- Mailgun Dashboard ‚Üí **Sending** ‚Üí **Logs**
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–∞—Ö —Å —Å—Ç–∞—Ç—É—Å–æ–º **Delivered**

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

- –¢–∞–±–ª–∏—Ü–∞ `bookings` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å
- –¢–∞–±–ª–∏—Ü–∞ `booking_confirmations` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å –∫–æ–¥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç–æ–≤—ã–µ —è—â–∏–∫–∏:

- Email –≥–æ—Å—Ç—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
- Email —Ö–æ–∑—è–∏–Ω–∞ (`backtobasewellness@gmail.com`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É Spam

**–ï—Å–ª–∏ –ø–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Mailgun –∏ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π!** üöÄ



